---
import { MoveById, PokemonMoveMethodProseById } from "src/utils/data-read";
import { capitalizeSnakeCase } from "src/utils/string";
import TypeBadge from "../TypeBadge.astro";

const { pokemon_move_method_id, pokemonMoveByMove, versionGroupIds } = Astro.props;
---

<thead>
  <tr>
    <th class="text-start text-[1.5em]" colspan="100%">{PokemonMoveMethodProseById[pokemon_move_method_id].name}</th>
  </tr>
</thead>
<tbody>
  {
    Object.entries(pokemonMoveByMove).map(([move_id, pokemonMoveByVersionGroup]) => (
      <tr id={`${pokemon_move_method_id}|${move_id}`}>
        <td>{capitalizeSnakeCase(MoveById[move_id].identifier)}</td>
        <td>{<TypeBadge type_id={MoveById[move_id].type_id} />}</td>
        <td>{MoveById[move_id].power}</td>
        <td>{MoveById[move_id].accuracy}</td>
        <td>{MoveById[move_id].pp}</td>
        {versionGroupIds.map((versionGroupId) => {
          const moves = (pokemonMoveByVersionGroup as any)[versionGroupId];
          return <td>{moves?.map((pokemonMove) => pokemonMove.level).join(", ")}</td>;
        })}
      </tr>
    ))
  }
</tbody>
<style>
  tr {
    border-bottom: 1px solid var(--sl-color-gray-6);
  }
  td,
  th {
    padding: 0.25em;
  }
</style>
